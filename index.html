<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>景點AR介紹</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        #debugInfo { 
            position: fixed; 
            top: 10px; 
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            z-index: 1000;
            display: block;
        }
        #spotInfo { 
            position: fixed; 
            bottom: 20px; 
            left: 50%; 
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            border-radius: 10px;
            display: none;
            max-width: 80%;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="debugInfo">等待AR初始化...</div>
    <div id="spotInfo"></div>
    
    <a-scene 
        embedded 
        arjs="trackingMethod: best; debugUIEnabled: true;"
        renderer="logarithmicDepthBuffer: true"
        vr-mode-ui="enabled: false"
        gesture-detector
    >
        <!-- 景點1 -->
        <a-marker 
            type="pattern" 
            preset="custom" 
            url="markers/spot1.patt" 
            emitevents="true"
        >
            <a-image 
                src="images/spot1_intro.jpg" 
                position="0 0 0" 
                rotation="-90 0 0" 
                scale="1 1 1"
                visible="true"
            ></a-image>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // 偵錯資訊顯示
        function updateDebugInfo(message) {
            const debugInfoElement = document.getElementById('debugInfo');
            debugInfoElement.textContent = message;
        }

        // 景點資訊對應表
        const spotInfoMap = {
            'spot1': '這是第一個景點的詳細介紹，敘述景點的歷史、特色等。'
        };

        // AR標記偵測事件
        const marker = document.querySelector('a-marker');
        
        marker.addEventListener('markerFound', function(event) {
            updateDebugInfo('找到標記！');
            console.log('Marker Found:', event);
            
            const spotInfoElement = document.getElementById('spotInfo');
            spotInfoElement.textContent = spotInfoMap['spot1'];
            spotInfoElement.style.display = 'block';

            setTimeout(() => {
                spotInfoElement.style.display = 'none';
            }, 3000);
        });

        marker.addEventListener('markerLost', function(event) {
            updateDebugInfo('失去標記');
            console.log('Marker Lost:', event);
            
            const spotInfoElement = document.getElementById('spotInfo');
            spotInfoElement.style.display = 'none';
        });

        // 監聽場景載入事件
        const scene = document.querySelector('a-scene');
        scene.addEventListener('loaded', function () {
            updateDebugInfo('AR場景已載入');
        });
    </script>
</body>
</html>
